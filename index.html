<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>InstaPronounce - Speak Instantly</title>
    <meta
      name="description"
      content="Need to pronounce something quickly? Get a fast, simple pronunciation attempt. Perfect for urgent situations."
    />
    <link rel="icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="manifest" href="/manifest.json" />
    <script src="https://js.puter.com/v2/"></script>
    <style>
      body {
        font-family: sans-serif;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 20px;
        background-color: #f8f9fa; /* Light background */
      }
      .container {
        max-width: 500px;
        width: 100%;
        padding: 30px;
        background-color: #fff; /* White container */
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
      }
      h1 {
        color: #343a40; /* Dark heading */
        margin-bottom: 20px;
        text-align: center;
      }
      textarea {
        width: calc(100% - 20px);
        padding: 10px;
        margin-bottom: 10px;
        border: 1px solid #ced4da; /* Light border */
        border-radius: 4px;
        font-size: 16px;
        min-height: 100px;
      }
      button {
        padding: 10px 20px;
        font-size: 16px;
        background-color: #007bff; /* Primary button color */
        color: #fff;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        transition: background-color 0.3s ease;
      }
      button:hover {
        background-color: #0056b3;
      }
      #pronunciationOutput {
        margin-top: 20px;
        padding: 15px;
        border: 1px solid #28a745; /* Success border */
        border-radius: 4px;
        background-color: #d4edda; /* Light success background */
        color: #155724; /* Dark success text */
        font-size: 18px;
        white-space: pre-wrap; /* Preserve formatting */
      }
      .material-3-expressive {
        /* Example class for potential styling */
        /* Add Material 3 Expressive styles here (you'd need to define these) */
      }
      #savedConversions {
        margin-top: 20px;
        width: 100%;
      }
      #savedConversions h2 {
        color: #343a40;
        text-align: center;
        margin-bottom: 10px;
      }
      #conversionsList {
        list-style-type: none;
        padding: 0;
      }
      #conversionsList li {
        background-color: #e9ecef; /* Light gray for list items */
        padding: 10px;
        margin-bottom: 5px;
        border-radius: 4px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      #conversionsList button {
        background-color: #6c757d; /* Secondary button color */
        color: #fff;
        padding: 5px 10px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 14px;
        transition: background-color 0.3s ease;
      }
      #conversionsList button:hover {
        background-color: #5a6268;
      }
      .save-button {
        margin-top: 10px;
        background-color: #28a745; /* Save button color */
      }
      .save-button:hover {
        background-color: #1e7e34;
      }
    </style>
  </head>
  <body class="material-3-expressive">
    <div class="container">
      <h1>InstaPronounce</h1>
      <textarea
        id="textToPronounce"
        placeholder="Enter text (English) up to 5000 characters"
      ></textarea>
      <button onclick="pronounceText()">Attempt Pronunciation</button>
      <div id="pronunciationOutput"></div>
      <button class="save-button" onclick="saveConversion()">Save This</button>
    </div>

    <div id="savedConversions" class="container">
      <h2>Saved Pronunciations</h2>
      <ul id="conversionsList"></ul>
    </div>

    <script>
      function pronounceText() {
        const text = document.getElementById("textToPronounce").value;
        if (text.length > 5000) {
          document.getElementById("pronunciationOutput").innerText =
            "Text exceeds the 5000 character limit.";
          return;
        }
        // Use Puter.js for text-to-speech
        puterJs.say(text);
        document.getElementById(
          "pronunciationOutput"
        ).innerText = `Attempting pronunciation... (Check your audio output)`;
      }

      function saveConversion() {
        const text = document.getElementById("textToPronounce").value;
        const saved = localStorage.getItem("savedConversions");
        let conversions = saved ? JSON.parse(saved) : [];
        conversions.push(text);
        localStorage.setItem("savedConversions", JSON.stringify(conversions));
        displaySavedConversions();
      }

      function displaySavedConversions() {
        const saved = localStorage.getItem("savedConversions");
        const conversions = saved ? JSON.parse(saved) : [];
        const list = document.getElementById("conversionsList");
        list.innerHTML = "";
        conversions.forEach((conversion, index) => {
          const listItem = document.createElement("li");
          listItem.textContent = conversion;
          const deleteButton = document.createElement("button");
          deleteButton.textContent = "Delete";
          deleteButton.onclick = () => deleteConversion(index);
          listItem.appendChild(deleteButton);
          list.appendChild(listItem);
        });
      }

      function deleteConversion(index) {
        const saved = localStorage.getItem("savedConversions");
        const conversions = saved ? JSON.parse(saved) : [];
        conversions.splice(index, 1);
        localStorage.setItem("savedConversions", JSON.stringify(conversions));
        displaySavedConversions();
      }

      window.onload = displaySavedConversions;
    </script>
  </body>
</html>
